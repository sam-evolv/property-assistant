---

**Wire up Kitchen Selections UI - All data is now in database**

## Data Summary

Kitchen selection data is now populated in `unit_sales_pipeline` for all developments:

| Development | Taking Kitchen | Taking Own | Pending | PC Sum Impact |
|-------------|----------------|------------|---------|---------------|
| Ãrdan View | 13 | 6 | 7 | -â‚¬39,000 |
| Rathard Lawn | 1 | 2 | 0 | -â‚¬12,000 |
| Rathard Park | 26 | 12 | 1 | -â‚¬80,000 |
| **TOTAL** | **40** | **20** | **8** | **-â‚¬131,000** |

## Database Columns Available

```sql
kitchen_selected    -- BOOLEAN: true=taking developer, false=taking own, null=pending
kitchen_counter     -- TEXT: e.g., "CT1", "CT3", "CT6"
kitchen_cabinet     -- TEXT: e.g., "Green", "White", "Navy", "Charcoal"
kitchen_handle      -- TEXT: e.g., "H3", "H9", "H12"
kitchen_wardrobes   -- BOOLEAN: true=taking developer, false=taking own
kitchen_notes       -- TEXT: notes/comments
kitchen_date        -- TIMESTAMP: when selection was made
pc_sum_kitchen      -- DECIMAL: kitchen PC sum impact (negative if taking own)
pc_sum_wardrobes    -- DECIMAL: wardrobe PC sum impact
pc_sum_total        -- DECIMAL: total PC sum impact
```

---

## 1. Kitchen Selections Page Updates

### Summary Cards (Top of Page)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Selection Progressâ”‚  â”‚ Taking Kitchen   â”‚  â”‚ Taking Own       â”‚  â”‚ PC Sum Impact    â”‚
â”‚   39 of 68       â”‚  â”‚   26 (67%)       â”‚  â”‚   13 (33%)       â”‚  â”‚  -â‚¬80,000        â”‚
â”‚   (57% complete) â”‚  â”‚   âœ“ Green        â”‚  â”‚   âœ— Red          â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Table Columns
| Unit | Address | Purchaser | Type | Kitchen | Counter | Cabinet | Handle | Wardrobes | PC Sum | Notes |

### Color Coding
- `kitchen_selected = TRUE` â†’ Green background on Kitchen cell
- `kitchen_selected = FALSE` â†’ Red background on Kitchen cell
- `kitchen_selected = NULL` â†’ Grey/empty
- `kitchen_wardrobes = TRUE` â†’ Green background
- `kitchen_wardrobes = FALSE` â†’ Red background
- `pc_sum_total < 0` â†’ Red text (e.g., "-â‚¬7,000")

### Dropdown Options for Editing

**Counter Tops:**
- CT1 - Show House Counter
- CT2 - White with Gold/Black Vein
- CT3 - Wood
- CT4 - Black/Yellow
- CT5 - Grey Counter
- CT6 - White with Brown Vein

**Cabinets:**
- Green
- Charcoal
- Navy
- White
- Dust Grey
- Light Grey

**Handles:**
- H1, H2, H3, H4, H5, H6, H7, H8, H9, H10, H11, H12, H13, H14, H15, H16

---

## 2. Sales Pipeline KITCHEN Column

### Status Indicator
- âšª Grey/Empty dash "â€”" = `kitchen_selected IS NULL` (not decided)
- ğŸŸ¢ Green circle/checkmark = `kitchen_selected = TRUE` (taking developer)
- ğŸ”´ Red circle/X = `kitchen_selected = FALSE` (taking own - PC sum deduction)

### Clickable Popover
When clicking the KITCHEN cell, show popover with full details:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kitchen Selection                                      â”‚
â”‚  28 Ãrdan View - 3 Bed Semi                            â”‚
â”‚  Batuhan Mundun & Duygu E D Mundun                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Kitchen:     âœ“ Taking Developer Kitchen                â”‚
â”‚  Counter:     CT5 - Grey Counter                        â”‚
â”‚  Cabinet:     Charcoal                                  â”‚
â”‚  Handle:      H12                                       â”‚
â”‚                                                         â”‚
â”‚  Wardrobes:   âœ“ Taking Developer Wardrobes              â”‚
â”‚                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  PC Sum Impact                                          â”‚
â”‚  Kitchen:     â‚¬0                                        â”‚
â”‚  Wardrobes:   â‚¬0                                        â”‚
â”‚  Total:       â‚¬0                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                         â”‚
â”‚  Notes:                                                 â”‚
â”‚  CT5/Charcoal/H12                                       â”‚
â”‚                                                         â”‚
â”‚                        [Edit Selection] [Close]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Example with PC sum deduction:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kitchen Selection                                      â”‚
â”‚  8 Ãrdan View - 4 Bed Detached                         â”‚
â”‚  Jan S. Silvestre & Pauline E. Imperial                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Kitchen:     âœ— Taking Own Kitchen                      â”‚
â”‚  Counter:     N/A                                       â”‚
â”‚  Cabinet:     N/A                                       â”‚
â”‚  Handle:      N/A                                       â”‚
â”‚                                                         â”‚
â”‚  Wardrobes:   âœ— Taking Own Wardrobes                    â”‚
â”‚                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  PC Sum Impact                              âš ï¸           â”‚
â”‚  Kitchen:     -â‚¬7,000 (4 bed allowance)     RED TEXT   â”‚
â”‚  Wardrobes:   -â‚¬1,000                       RED TEXT   â”‚
â”‚  Total:       -â‚¬8,000                       RED TEXT   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                         â”‚
â”‚  Notes:                                                 â”‚
â”‚  Confirmed taking PC sum - ordering from own supplier   â”‚
â”‚                                                         â”‚
â”‚                        [Edit Selection] [Close]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Analytics Integration

### Individual Development Analysis
Add section "PC Sum Revenue Impact":

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PC Sum Revenue Impact                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Selections Complete:  39 of 68 (57%)                        â”‚
â”‚                                                             â”‚
â”‚ Kitchen Decisions:                                          â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  26 taking developer (67%)             â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  13 taking own (33%)                   â”‚
â”‚                                                             â”‚
â”‚ Wardrobe Decisions:                                         â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  35 taking developer (90%)             â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   4 taking own (10%)                   â”‚
â”‚                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚ Revenue Impact                                              â”‚
â”‚                                                             â”‚
â”‚ Contracted Sale Revenue:        â‚¬30,260,000                 â”‚
â”‚ Kitchen PC Sum Deductions:        -â‚¬76,000  (13 units)      â”‚
â”‚ Wardrobe PC Sum Deductions:        -â‚¬4,000  (4 units)       â”‚
â”‚                                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚ Adjusted Revenue:               â‚¬30,180,000                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Portfolio Analysis (All Developments)
Add combined PC sum table:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PC Sum Revenue Impact - All Developments                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Development    â”‚ Decided â”‚ Taking Own â”‚ PC Sum Impact                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Ãrdan View     â”‚  19     â”‚  6 (32%)   â”‚  -â‚¬39,000                       â”‚
â”‚ Rathard Park   â”‚  38     â”‚  12 (32%)  â”‚  -â‚¬80,000                       â”‚
â”‚ Rathard Lawn   â”‚   3     â”‚  2 (67%)   â”‚  -â‚¬12,000                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ TOTAL          â”‚  60     â”‚  20 (33%)  â”‚  -â‚¬131,000                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Revenue Summary:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Contracted Rev   â”‚  â”‚ PC Sum Deductionsâ”‚  â”‚ Adjusted Revenue â”‚
â”‚  â‚¬XX,XXX,XXX     â”‚  â”‚    -â‚¬131,000     â”‚  â”‚  â‚¬XX,XXX,XXX     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. API Endpoints

Ensure these return kitchen data:

### GET /api/pipeline/[developmentId]
Include in response:
```json
{
  "units": [{
    "id": "...",
    "address": "28 Ãrdan View",
    "kitchenSelected": true,
    "kitchenCounter": "CT5",
    "kitchenCabinet": "Charcoal",
    "kitchenHandle": "H12",
    "kitchenWardrobes": true,
    "kitchenNotes": "CT5/Charcoal/H12",
    "pcSumKitchen": 0,
    "pcSumWardrobes": 0,
    "pcSumTotal": 0
  }]
}
```

### GET /api/kitchen-selections/[developmentId]
Dedicated endpoint for Kitchen Selections page with summary stats.

### PUT /api/kitchen-selections/[unitId]
Update kitchen selection - auto-calculate PC sums based on bedrooms:
- 4 bed: â‚¬7,000 kitchen / â‚¬1,000 wardrobes
- 3 bed: â‚¬6,000 kitchen / â‚¬1,000 wardrobes
- 2 bed: â‚¬5,000 kitchen / â‚¬1,000 wardrobes

---

## 5. Settings (Future Enhancement)

Add ability to configure per-tenant:
- PC sum amounts by bedroom count
- Counter/Cabinet/Handle options

For now, hardcode the options listed above.

---