# Replit Agent Prompt: Multi-Tenant Drizzle Schema Setup

1. Inside /packages/db, create schema.ts with:
------------------------------------------------
import { pgTable, uuid, text, timestamp, boolean } from "drizzle-orm/pg-core";

export const tenants = pgTable("tenants", {
  id: uuid("id").primaryKey().defaultRandom(),
  name: text("name").notNull(),
  slug: text("slug").notNull().unique(),
  createdAt: timestamp("created_at").defaultNow(),
});

export const tenantMembers = pgTable("tenant_members", {
  id: uuid("id").primaryKey().defaultRandom(),
  tenantId: uuid("tenant_id").references(() => tenants.id).notNull(),
  userId: text("user_id").notNull(),
  role: text("role").default("resident"),
  createdAt: timestamp("created_at").defaultNow(),
});

export const noticeboardPosts = pgTable("noticeboard_posts", {
  id: uuid("id").primaryKey().defaultRandom(),
  tenantId: uuid("tenant_id").references(() => tenants.id).notNull(),
  title: text("title").notNull(),
  content: text("content").notNull(),
  createdAt: timestamp("created_at").defaultNow(),
});

export const tickets = pgTable("tickets", {
  id: uuid("id").primaryKey().defaultRandom(),
  tenantId: uuid("tenant_id").references(() => tenants.id).notNull(),
  userId: text("user_id"),
  subject: text("subject").notNull(),
  status: text("status").default("open"),
  createdAt: timestamp("created_at").defaultNow(),
});
------------------------------------------------

2. Create drizzle.config.ts in the same folder:
------------------------------------------------
import type { Config } from "drizzle-kit";
export default {
  schema: "./packages/db/schema.ts",
  out: "./drizzle",
  driver: "pg",
  dbCredentials: {
    connectionString: process.env.POSTGRES_URL!,
  },
} satisfies Config;
------------------------------------------------

3. Run:
   npx drizzle-kit push --config=packages/db/drizzle.config.ts

4. Verify tables appear in Supabase → Table Editor → public.

Print ✅ "Supabase schema successfully deployed."
